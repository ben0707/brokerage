@{
    Layout = "~/Views/Shared/_Account.cshtml";
    ViewData["Title"] = "Deposit - In progress";
}

<div class="mx-auto flex min-h-[calc(100vh-160px)] max-w-4xl flex-col items-center justify-start px-4 pt-14 md:pt-20">

    <!-- FIXED ICON -->
    <div class="mb-4 flex h-12 w-12 items-center justify-center">
        <svg viewBox="0 0 24 24" class="h-10 w-10 text-slate-500 dark:text-slate-300" fill="none" stroke="currentColor"
            stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">

            <!-- Rocket body -->
            <path d="M12 2c4.5 2 7 6.5 7 11.5V16l-4 1-3-3-3 3-4-1v-2.5C5 8.5 7.5 4 12 2z" />

            <!-- Window -->
            <circle cx="12" cy="9" r="1.5" />

            <!-- Flame -->
            <path d="M12 17c-1 1.5-1.5 2.5-1.5 3.5h3c0-1-.5-2-1.5-3.5z" />
        </svg>
    </div>


    <!-- Title -->
    <h1 class="text-center text-2xl font-semibold tracking-tight text-slate-900 dark:text-white md:text-3xl">
        Your transaction is in progress
    </h1>

    <!-- Subtitle -->
    <p class="mt-2 max-w-xl text-center text-sm text-slate-500 dark:text-slate-400">
        Once the provider accepts it, you'll be able to track its status on the Transaction History page
    </p>

    <!-- Actions -->
    <div class="mt-6 flex flex-wrap items-center justify-center gap-3">
        <a href="#" class="inline-flex items-center justify-center rounded-md bg-brandYellow px-6 py-2 text-sm font-semibold
                  text-black hover:bg-yellow-300 active:bg-yellow-400">
            View History
        </a>

        <a href="#" class="inline-flex items-center justify-center rounded-md border border-slate-200 bg-slate-50 px-6 py-2 text-sm font-semibold
                  text-slate-900 hover:bg-slate-100
                  dark:border-slate-800 dark:bg-white/5 dark:text-white dark:hover:bg-white/10">
            New Deposit
        </a>
    </div>

    <!-- Divider -->
    <div class="mt-10 w-full max-w-2xl border-t border-slate-200 dark:border-slate-800"></div>

    <!-- Rating -->
    <div class="mt-8 flex w-full max-w-2xl flex-col items-center">
        <h2 class="text-center text-sm font-semibold text-slate-900 dark:text-white">
            How was your payment experience?
        </h2>

        <!-- Stars -->
        <div class="mt-4 flex items-center gap-4" id="ratingRoot" data-rating="0">
            @for (var i = 1; i <= 5; i++)
            {
                <button type="button" class="group inline-flex h-10 w-10 items-center justify-center rounded-md
                                       hover:bg-slate-50 dark:hover:bg-white/5" aria-label="Rate @i star" data-star="@i">
                    <svg viewBox="0 0 24 24" class="h-6 w-6 text-slate-400 transition-colors duration-150
                                        group-hover:text-slate-700 dark:text-slate-500 dark:group-hover:text-slate-200"
                        fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"
                        data-star-icon>
                        <path d="M12 2.8l2.9 6 6.6.9-4.8 4.6 1.2 6.6L12 18.9 6.1 20.9l1.2-6.6-4.8-4.6 6.6-.9L12 2.8z" />
                    </svg>
                </button>
            }
        </div>

        <!-- Labels -->
        <div class="mt-2 flex w-full max-w-xs items-center justify-between text-xs text-slate-500 dark:text-slate-400">
            <span>Very bad</span>
            <span>Very good</span>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        (function () {
            const root = document.getElementById("ratingRoot");
            if (!root) return;

            const stars = Array.from(root.querySelectorAll("[data-star]"));

            function paint(val) {
                stars.forEach(btn => {
                    const n = Number(btn.getAttribute("data-star"));
                    const icon = btn.querySelector("[data-star-icon]");
                    if (!icon) return;

                    // active stars = filled look via stroke + slight fill
                    if (n <= val) {
                        icon.classList.remove("text-slate-400", "dark:text-slate-500");
                        icon.classList.add("text-slate-900", "dark:text-white");
                        icon.setAttribute("fill", "currentColor");
                        icon.setAttribute("fill-opacity", "0.10");
                    } else {
                        icon.classList.remove("text-slate-900", "dark:text-white");
                        icon.classList.add("text-slate-400", "dark:text-slate-500");
                        icon.setAttribute("fill", "none");
                        icon.removeAttribute("fill-opacity");
                    }
                });
            }

            // hover preview
            stars.forEach(btn => {
                btn.addEventListener("mouseenter", () => paint(Number(btn.dataset.star)));
                btn.addEventListener("click", () => {
                    const val = Number(btn.dataset.star);
                    root.dataset.rating = String(val);
                    paint(val);

                    // TODO: send to backend if you want:
                    // fetch("/payments/rating", { method:"POST", headers:{ "Content-Type":"application/json" }, body: JSON.stringify({ rating: val }) })
                });
            });

            // restore after hover
            root.addEventListener("mouseleave", () => paint(Number(root.dataset.rating || "0")));

            // initial
            paint(Number(root.dataset.rating || "0"));
        })();
    </script>
}