@{
    ViewData["Title"] = "_Auth";
    Layout = null;
}

@{
    var brandName = "EMAR Markets"; // change to your brand
    var title = ViewData["Title"] as string ?? "Account";
}

<!DOCTYPE html>
<html lang="en" class="h-full" data-theme="light">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>@title - @brandName</title>

    <!-- Tailwind / site css -->
    <!-- Tailwind CSS via CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        brandGold: '#F3C65A',
                        brandDark: '#020617'
                    },
                    boxShadow: {
                        'soft-card': '0 18px 45px rgba(15,23,42,0.35)'
                    }
                }
            }
        }
    </script>
    <link rel="stylesheet" href="~/css/site-style.css" asp-append-version="true" />

    @RenderSection("Head", required: false)
</head>

<body class="min-h-screen bg-slate-50 text-slate-900 antialiased dark:bg-black dark:text-slate-50">
    <div class="flex min-h-screen flex-col">

        <!-- NAVBAR -->
        <header
            class="sticky top-0 z-20 border-b border-slate-200/70 bg-white/90 backdrop-blur dark:border-slate-800 dark:bg-black/90">
            <nav class="mx-auto flex max-w-5xl items-center justify-between px-4 py-3">
                <!-- Logo -->
                <a href="~/" class="flex items-center gap-2">
                    <div
                        class="flex h-9 w-9 items-center justify-center rounded-xl bg-black text-xs font-semibold text-white dark:bg-white dark:text-black">
                        EM
                    </div>
                    <span class="text-sm font-semibold tracking-tight">@brandName</span>
                </a>

                <!-- Dark mode toggle -->
                <button id="theme-toggle" type="button"
                    class="inline-flex h-9 w-9 items-center justify-center rounded-full border border-slate-200 bg-white/80 text-[13px] text-slate-700 shadow-sm transition hover:bg-slate-100 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100 dark:hover:bg-slate-800"
                    aria-label="Toggle dark mode">
                    <span id="icon-sun" class="hidden">
                        <svg viewBox="0 0 20 20" class="h-4 w-4" fill="none" stroke="currentColor" stroke-width="1.7">
                            <circle cx="10" cy="10" r="3.2" />
                            <path
                                d="M10 2v2.4M10 15.6V18M4.22 4.22 5.9 5.9M14.1 14.1l1.68 1.68M2 10h2.4M15.6 10H18M4.22 15.78 5.9 14.1M14.1 5.9l1.68-1.68" />
                        </svg>
                    </span>
                    <span id="icon-moon" class="hidden">
                        <svg viewBox="0 0 20 20" class="h-4 w-4" fill="none" stroke="currentColor" stroke-width="1.7">
                            <path d="M15.5 13.8A6.5 6.5 0 0 1 6.2 4.5 5.5 5.5 0 1 0 15.5 13.8Z" />
                        </svg>
                    </span>
                </button>
            </nav>
        </header>

        <!-- MAIN (Centered Page Content) -->
        <main class="flex flex-1 items-center justify-center px-4 py-10">
            <div class="w-full max-w-md">
                @RenderBody() <!-- Login/Register pages render here directly -->
            </div>
        </main>
        <!-- FOOTER -->
        <footer
            class="border-t border-slate-200 bg-white/90 px-4 py-4 text-[11px] text-slate-500 dark:border-slate-800 dark:bg-black/95 dark:text-slate-500">
            <div class="mx-auto flex max-w-5xl items-center justify-between">
                <span>&copy; @DateTime.UtcNow.Year @brandName. All rights reserved.</span>
                <span class="hidden gap-3 md:inline-flex">
                    <a href="~/legal/terms" class="hover:text-slate-700 dark:hover:text-slate-300">Terms</a>
                    <span class="text-slate-400">â€¢</span>
                    <a href="~/legal/privacy" class="hover:text-slate-700 dark:hover:text-slate-300">Privacy</a>
                </span>
            </div>
        </footer>
    </div>

    <!-- DARK MODE SCRIPT -->
    <script>
            (function () {
                const STORAGE_KEY = "emar-theme";
                const root = document.documentElement;
                const btn = document.getElementById("theme-toggle");
                const iconSun = document.getElementById("icon-sun");
                const iconMoon = document.getElementById("icon-moon");

                function applyTheme(theme) {
                    const isDark = theme === "dark";
                    root.classList.toggle("dark", isDark);

                    if (iconSun && iconMoon) {
                        if (isDark) {
                            iconMoon.classList.add("hidden");
                            iconSun.classList.remove("hidden");
                        } else {
                            iconSun.classList.add("hidden");
                            iconMoon.classList.remove("hidden");
                        }
                    }
                }

                const saved = localStorage.getItem(STORAGE_KEY);
                if (saved === "dark" || saved === "light") {
                    applyTheme(saved);
                } else {
                    const prefersDark = window.matchMedia("(prefers-color-scheme: dark)").matches;
                    applyTheme(prefersDark ? "dark" : "light");
                }

                if (btn) {
                    btn.addEventListener("click", function () {
                        const isDark = root.classList.contains("dark");
                        const next = isDark ? "light" : "dark";
                        localStorage.setItem(STORAGE_KEY, next);
                        applyTheme(next);
                    });
                }
            })();
    </script>

    @RenderSection("Scripts", required: false)
</body>

</html>